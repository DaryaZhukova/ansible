- name: Generate key
  hosts: local
  pre_tasks:
  - name: Create fact folder
    become: yes
    file:
      path: /etc/ansible/facts.d
      state: directory
  tasks:
  roles: 
  - common
  post_tasks: 
  - name: Clear keys
    become: yes
    file:
      path: 
      - devops
      - devops.pub
      state: absent


- name: Configuring devops user
  hosts: nodes
  pre_tasks:
  - name: Create fact folder
    become: yes
    file:
      path: /etc/ansible/facts.d
      state: directory
  roles:
  - devops_user

- name: Install httpd
  hosts: webservers
  roles:
  - httpd

- name: Install Java & Jenkins
  vars: 
  - jenkins_version: 2.121.2
  hosts: appservers
  roles:
  - jenkins
